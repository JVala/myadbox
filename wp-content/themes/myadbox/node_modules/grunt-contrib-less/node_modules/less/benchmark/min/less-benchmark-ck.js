var path=require("path"),fs=require("fs"),sys=require("util"),less=require("../lib/less"),file=path.join(__dirname,"benchmark.less");process.argv[2]&&(file=path.join(process.cwd(),process.argv[2])),fs.readFile(file,"utf8",function(e,s){var r,n,a,o,t;console.log("Benchmarking...\n",path.basename(file)+" ("+parseInt(s.length/1024)+" KB)",""),a=new Date,new less.Parser({optimization:2}).parse(s,function(e,r){o=new Date,t=o-a,console.log("Parsing: "+t+" ms ("+Number(1e3/t*s.length/1024)+" KB/s)"),a=new Date,n=r.toCSS(),o=new Date,console.log("Generation: "+(o-a)+" ms ("+parseInt(1e3/(o-a)*s.length/1024)+" KB/s)"),t+=o-a,console.log("Total: "+t+"ms ("+Number(1e3/t*s.length/1024)+" KB/s)"),e&&(less.writeError(e),process.exit(3))})});